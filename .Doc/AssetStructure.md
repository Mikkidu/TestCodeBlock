# Архитектура папок Assets

## Общая структура

```
Assets/
├── Scenes/                          # Игровые сцены
│   └── GameScene.unity              # Главная сцена с роботом и UI
│
├── Prefabs/                         # Переиспользуемые объекты
│   ├── Robot/
│   │   └── Robot.prefab             # Робот (куб + индикатор направления)
│   └── UI/
│       ├── Canvas.prefab            # Canvas с Event System
│       ├── BlockUI.prefab           # Префаб одного блока команды
│       ├── BlockPalette.prefab      # Палитра со всеми доступными командами
│       └── ProgramArea.prefab       # Рабочая область для программы
│
├── ScriptableObjects/               # Конфиги и данные игры
│   ├── Configs/
│   │   └── RobotConfig.asset        # Настройки робота (скорость, дистанция и т.д.)
│   └── Programs/
│       └── ExampleProgram.asset      # Пример сохраненной программы (опционально)
│
├── Materials/                       # Материалы для визуализации
│   ├── RobotMaterial.mat            # Материал для корпуса робота
│   ├── DirectionIndicator.mat       # Материал для индикатора направления
│   └── BlockMaterial.mat            # Материал для UI блоков
│
├── Sprites/                         # Спрайты и иконки
│   ├── Blocks/
│   │   ├── MoveForward.png          # Иконка команды "Вперед"
│   │   ├── MoveBackward.png         # Иконка команды "Назад"
│   │   ├── TurnLeft.png             # Иконка команды "Влево"
│   │   ├── TurnRight.png            # Иконка команды "Вправо"
│   │   └── Wait.png                 # Иконка команды "Ждать"
│   ├── UI/
│   │   ├── ButtonRun.png            # Иконка кнопки "Запуск"
│   │   ├── ButtonStop.png           # Иконка кнопки "Стоп"
│   │   ├── ButtonReset.png          # Иконка кнопки "Сброс"
│   │   └── ButtonClear.png          # Иконка кнопки "Очистить"
│   └── Robot/
│       ├── RobotIdle.png            # Спрайт робота (вид сверху или сбоку)
│       └── RobotExecuting.png       # Спрайт робота при выполнении
│
├── Sounds/                          # Звуковые эффекты
│   ├── robot_move.wav               # Звук движения робота
│   ├── robot_turn.wav               # Звук поворота
│   ├── block_snap.wav               # Звук привязки блока
│   ├── program_start.wav            # Звук начала программы
│   ├── program_complete.wav         # Звук завершения программы
│   └── error_sound.wav              # Звук ошибки
│
├── Resources/                       # Ресурсы, загружаемые в runtime
│   └── Configs/
│       └── RobotConfig.asset        # Резервная копия конфига для Resources.Load()
│
├── Editor/                          # Редакторские инструменты
│   └── Tools/
│       ├── BlockDataImporter.cs     # Импортер программ из файлов
│       └── RobotConfigValidator.cs  # Валидатор параметров робота
│
└── Scripts/                         # Исходный код (уже существует)
    └── RobotProgramming/            # Наша система робота
        ├── Core/
        ├── Commands/
        ├── Robot/
        ├── Execution/
        ├── UI/
        ├── Managers/
        └── Data/
```

## Описание каждой папки

### 📍 `Scenes/`
- **Назначение:** Игровые сцены
- **Содержит:**
  - `GameScene.unity` - основная сцена с роботом, UI и GameManager
- **Правила:**
  - Одна сцена для одного уровня/режима
  - Все префабы должны инстанцироваться в сцене или через код

### 🎁 `Prefabs/`
- **Назначение:** Переиспользуемые игровые объекты
- **Подпапки:**
  - `Robot/` - префабы робота и его компонентов
  - `UI/` - все UI элементы (Canvas, блоки, палитра, кнопки)
- **Правила:**
  - Один префаб = один логический объект
  - Используются как "шаблоны" для инстанцирования в runtime

### ⚙️ `ScriptableObjects/`
- **Назначение:** Конфигурируемые данные и ассеты
- **Подпапки:**
  - `Configs/` - конфиги системы (RobotConfig, GameSettings и т.д.)
  - `Programs/` - сохраненные программы пользователя (опционально)
- **Пример использования:**
  ```csharp
  var config = Resources.Load<RobotConfig>("Configs/RobotConfig");
  // или через Serialized Field в Inspector
  ```

### 🎨 `Materials/`
- **Назначение:** Материалы для визуализации
- **Содержит:**
  - Материалы для разных частей робота
  - Материалы для UI элементов (если используется графика)
- **Примечание:** Для 3D робота; для 2D используются Sprites

### 🖼️ `Sprites/`
- **Назначение:** 2D графика (иконки, спрайты, UI элементы)
- **Структура:**
  - `Blocks/` - иконки для каждого типа команды (5 штук)
  - `UI/` - иконки кнопок и UI элементов
  - `Robot/` - спрайты робота если нужны
- **Правило:** 1 спрайт = 1 папка, если много вариантов

### 🔊 `Sounds/`
- **Назначение:** Звуковые эффекты
- **Примеры:**
  - Звуки движения/поворота робота
  - Звуки UI (щелчки, привязка блоков)
  - Звуки ошибок
- **Формат:** .wav или .mp3

### 📦 `Resources/`
- **Назначение:** Динамическая загрузка в runtime через `Resources.Load<T>()`
- **Примечание:**
  - Используется только для критичных ассетов
  - Лучше хранить конфиги здесь и в ScriptableObjects/
  - Игнорируется при сборке если не используется

### 🛠️ `Editor/`
- **Назначение:** Инструменты для редактора Unity
- **Подпапки:**
  - `Tools/` - кастомные скрипты редактора
- **Примеры:**
  - Валидаторы конфигов
  - Импортеры программ из файлов
  - Генераторы тестовых данных

---

## Правила организации

### ✅ ДА:
- Группировать по типам ассетов (Prefabs, Sprites, Sounds и т.д.)
- Использовать подпапки для логической организации
- Давать понятные имена файлам (MoveForwardCommand, not MFC)
- Держать похожие ассеты рядом

### ❌ НЕТ:
- Не смешивать скрипты со спрайтами в одной папке
- Не использовать очень глубокую иерархию (макс 3 уровня)
- Не копировать ассеты в разные места
- Не называть файлы по номерам (1, 2, 3...)

---

## Процесс создания новой команды

Когда добавляете новую команду (например, `LoopCommand`):

```
1. Создайте скрипт:
   Assets/Scripts/RobotProgramming/Commands/LoopCommand.cs

2. Создайте спрайт/иконку:
   Assets/Sprites/Blocks/Loop.png

3. Обновите BlockFactory:
   добавить case для CommandType.Loop

4. (Опционально) Создайте конфиг:
   Assets/ScriptableObjects/Configs/LoopConfig.asset
```

---

## Связь между слоями

```
┌─────────────────────────────────────────┐
│  Scenes/                                │ ← Сцена с настройкой
│  └─ GameScene.unity                     │
├─────────────────────────────────────────┤
│  Prefabs/ + ScriptableObjects/          │ ← Конфигурация
│  ├─ Prefabs/UI/BlockUI.prefab           │
│  ├─ Prefabs/Robot/Robot.prefab          │
│  └─ ScriptableObjects/Configs/RobotConf│
├─────────────────────────────────────────┤
│  Scripts/RobotProgramming/               │ ← Логика
│  ├─ Managers/GameManager.cs             │
│  ├─ UI/BlockFactory.cs                  │
│  └─ Robot/RobotController.cs            │
├─────────────────────────────────────────┤
│  Sprites/ + Materials/ + Sounds/        │ ← Визуализация
│  ├─ Sprites/Blocks/*.png                │
│  ├─ Materials/*.mat                     │
│  └─ Sounds/*.wav                        │
└─────────────────────────────────────────┘
```

---

## Примеры путей для Resources.Load()

```csharp
// Конфиг робота
var config = Resources.Load<RobotConfig>("Configs/RobotConfig");

// Спрайт команды (если нужен)
var sprite = Resources.Load<Sprite>("Sprites/Blocks/MoveForward");

// Звук
var audio = Resources.Load<AudioClip>("Sounds/block_snap");
```

---

## Итого в структуре

| Папка | Тип | Кол-во файлов | Назначение |
|-------|-----|---|---|
| `Scenes/` | .unity | 1-3 | Игровые сцены |
| `Prefabs/` | .prefab | 4-6 | Шаблоны объектов |
| `ScriptableObjects/` | .asset | 2-5 | Конфиги данные |
| `Sprites/` | .png/.jpg | 10-15 | Графика UI и иконки |
| `Sounds/` | .wav/.mp3 | 5-10 | Звуковые эффекты |
| `Materials/` | .mat | 3-5 | Материалы для 3D |
| `Resources/` | .asset | 1-2 | Динамическая загрузка |
| `Editor/` | .cs | 2-4 | Утилиты редактора |
| `Scripts/` | .cs | 31+ | Исходный код |

---

Готово! Структура масштабируема и готова к расширению. 🚀
